<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stephen's Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background: #111;
      color: #33ff33;
      font-family: monospace;
      padding: 20px;
      overflow-x: hidden;
      overflow-y: auto;
    }
    #terminal {
      white-space: pre-wrap;
      word-break: break-word;
      min-height: 60vh;
    }
    .input-line {
      display: inline;
    }
    .cursor {
      display: inline-block;
      width: 10px;
      background: #33ff33;
      animation: blink 1s infinite;
    }
    @keyframes blink {
      50% { background: transparent; }
    }

    /* hidden input for mobile */
    #mobile-input {
      position: absolute;
      bottom: -50px;
      opacity: 0;
      pointer-events: none;
    }

    /* hint for mobile users */
    #tap-hint {
      color: #33ff33;
      font-size: 14px;
      margin-top: 10px;
      opacity: 0.7;
      display: none;
    }
  </style>
</head>
<body>
  <div id="terminal"></div>
  <div id="current-line" style="display:none;">stephen@MacBookPro ~ % <span class="input-line"></span><span class="cursor"></span></div>

  <input type="text" id="mobile-input" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <div id="tap-hint">ðŸ’¡ Tap anywhere to start typing</div>

  <script>
    const terminal = document.getElementById("terminal");
    const currentLine = document.getElementById("current-line").querySelector(".input-line");
    const mobileInput = document.getElementById("mobile-input");
    const tapHint = document.getElementById("tap-hint");

    const commands = {
      "whoami": "Name: Stephen Torroba\nRole: Aspiring Cyber Security Engineer\nGoal: To protect and secure systems.",
      "skills": "Python, Linux, Networking, Web Security, Ethical Hacking",
      "projects": "1. Project A\n2. Project B\n3. Project C",
      "contact": "Email: stephen@torroba.me\nLinkedIn: linkedin.com/in/stephentorroba",
      "help": "Available commands: whoami, skills, projects, contact, help",
      "clear": "clear"
    };

    let currentInput = "";
    let history = [];
    let historyIndex = -1;

    const loginMessage = `Last login: ${new Date().toDateString()} ${new Date().toLocaleTimeString()} on console\n`;
    terminal.textContent = loginMessage;

    setTimeout(() => {
      document.getElementById("current-line").style.display = "block";
      tapHint.style.display = "block"; // show tap hint on mobile
    }, 1200);

    // Let user tap anywhere to trigger keyboard
    document.body.addEventListener("click", () => {
      mobileInput.focus();
      tapHint.style.display = "none"; // hide hint once user taps
    });

    // Desktop keyboard support
    document.addEventListener("keydown", (e) => {
      if (document.getElementById("current-line").style.display === "none") return;
      handleKey(e.key);
    });

    // Mobile input support
    mobileInput.addEventListener("input", () => {
      currentInput = mobileInput.value;
      render();
    });
    mobileInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        handleKey("Enter");
        mobileInput.value = "";
      }
    });

    function handleKey(key) {
      if (key === "Enter") {
        processCommand(currentInput.trim());
        if (currentInput) history.unshift(currentInput);
        historyIndex = -1;
        currentInput = "";
      } else if (key === "Backspace") {
        currentInput = currentInput.slice(0, -1);
      } else if (key === "ArrowUp") {
        if (historyIndex + 1 < history.length) {
          historyIndex++;
          currentInput = history[historyIndex];
        }
      } else if (key === "ArrowDown") {
        if (historyIndex > 0) {
          historyIndex--;
          currentInput = history[historyIndex];
        } else {
          historyIndex = -1;
          currentInput = "";
        }
      } else if (key.length === 1) {
        currentInput += key;
      }
      render();
    }

    function processCommand(cmd) {
      if (cmd === "clear") {
        terminal.textContent = loginMessage;
        return;
      }
      terminal.textContent += `stephen@MacBookPro ~ % ${cmd}\n${commands[cmd] || "Command not found. Type 'help' for options."}\n`;
    }

    function render() {
      currentLine.textContent = currentInput;
      window.scrollTo(0, document.body.scrollHeight);
    }
  </script>
</body>
</html>